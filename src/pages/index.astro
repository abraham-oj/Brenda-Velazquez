---
import Layout from "../layouts/Layout.astro";
import FloatingNav from "../components/FloatingNav.astro";
// üí° NUEVA IMPORTACI√ìN: Importamos el componente de videos optimizado
import VideosNoticias from "../components/videos/videos.astro";

const propuestas = [
  "1. Recuperar la Prima de Antig√ºedad.",
  "2. Escalaf√≥n con Justicia, Equidad y Transparencia.",
  "3. Creaci√≥n de Nuevas Plazas.",
  "4. Recuperaci√≥n de la Plaza por Otorgamiento a los Hijos.",
  "5. Pugnar por el cumplimiento de las Condiciones Generales.",
  "6. Trato digno en el Servicio M√©dico.",
  "7. Impulsar Programas de Vivienda.",
  "8. Creaci√≥n de un Bufete Jur√≠dico.",
  "9. Atenci√≥n cercana al Trabajador Activo, Jubilado y Pensionado.",
  "10. Retomar Convenio de los Servicios Funerarios.",
  "11. Dignificaci√≥n del Trabajador Sindicalizado.",
];

// Generamos array de fotos
const galeriaFotos = Array.from(
  { length: 15 },
  (_, i) => `/images/gallery/evento-${i + 1}.jpg`
);
---

<Layout title="Brenda Vel√°zquez - Planilla Verde">
  <FloatingNav />

  {/* üí• NUEVO HERO: Video Vertical + Imagen de Alto Impacto üí• */}
  <header class="new-hero-split">
    <div class="hero-panel hero-video-panel">
      {
        /* Video Vertical (Instagram Reel embed) - Usamos el embed del Short para mejor rendimiento */
      }
      <div class="vertical-video-wrapper">
        <iframe
          src="https://youtube.com/shorts/r0KcRqgCRVM?feature=share"
          title="Video Vertical de Campa√±a"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen></iframe>
      </div>
    </div>

    <div class="hero-panel hero-image-panel">
      {/* Imagen de Alto Impacto (hero-1.jpg) y el texto de la campa√±a */}
      <div class="campaign-image-container">
        <img
          src="/images/hero-1.jpg"
          alt="Brenda Vel√°zquez - Esperanza en un Mejor Sindicato"
          loading="eager"
          class="hero-main-image"
        />
        <div class="campaign-tagline">
          <h1 class="main-title">
            EL CAMBIO<br /><span class="highlight">VERDADERO</span>
          </h1>
          <div class="separator"></div>
          <p class="date-line">PUEBLA, PUE. ‚Äî DICIEMBRE 2025</p>
        </div>
      </div>
    </div>
  </header>

  <main>
    <section id="frontPage" class="paper-section reveal">
      <div class="container">
        <h2 class="headline text-center">Nuestras 11 Propuestas Maestras</h2>
        <div class="proposals-grid">
          {
            propuestas.map((p) => (
              <div class="proposal-card">
                <div class="check-icon">‚úì</div>
                <p>{p}</p>
              </div>
            ))
          }
        </div>

        <div class="magic-trigger-container">
          <button id="magicBtn" class="magic-btn">
            ‚ñº VER NOTICIAS DEL D√çA
          </button>
        </div>
      </div>
    </section>

    <section id="newsWall" class="news-section hidden">
      <div class="container">
        {
          /* Llama al componente que ahora muestra los videos de YouTube optimizados */
        }
        <VideosNoticias />
      </div>
    </section>

    <section class="gallery-full reveal">
      <div class="container">
        <h2 class="headline text-center">Galer√≠a del Movimiento</h2>

        <div class="gallery-grid-compact" id="galleryGrid">
          {
            galeriaFotos.map((foto, index) => (
              <div class={`media-item ${index >= 6 ? "hidden-photo" : ""}`}>
                <img src={foto} loading="lazy" alt="Evento" />
              </div>
            ))
          }
        </div>

        <div class="text-center" style="margin-top: 2rem;">
          <button id="loadMoreGallery" class="secondary-btn">
            + Ver todas las fotos
          </button>
        </div>
      </div>
    </section>

    <section class="cv-section reveal">
      <div class="container text-center">
        <h2>Transparencia Total</h2>
        <p>Conoce mi trayectoria profesional y sindical.</p>
        <a
          href="/docs/CV_Brenda_Velazquez.pdf"
          target="_blank"
          class="download-btn"
        >
          Descargar CV Oficial (PDF)
        </a>
      </div>
    </section>
  </main>

  <footer class="main-footer">
    <div class="container footer-content">
      <div class="copyright">
        <p>&copy; 2025 Brenda Vel√°zquez Batana. Planilla Verde.</p>
      </div>
      <div class="credits">
        <p>
          Desarrollado con <span class="heart">‚ù§</span> por <a
            href="https://linkedin.com/in/zaidojeda"
            target="_blank">Abraham Ojeda Web Dev</a
          >
        </p>
      </div>
    </div>
  </footer>
</Layout>

<style>
  /* üí• ESTILOS DEL NUEVO HERO DE CONTENIDO üí• */
  .new-hero-split {
    display: flex;
    min-height: 85vh;
    background: linear-gradient(
      to right,
      #f0f4f0 50%,
      #ffffff 100%
    ); /* Cambiamos el degradado */
    position: relative;
    overflow: hidden;
    padding-top: 5rem; /* Espacio para el header fijo */
  }

  .hero-panel {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 2rem;
  }

  .hero-video-panel {
    flex-direction: column;
    padding-right: 1rem;
    background: #000;
  }

  .hero-image-panel {
    flex-direction: column;
    padding-left: 1rem;
    box-shadow: -2px 0 10px rgba(0, 0, 0, 0.05); /* Sutil separaci√≥n */
    background: #ffffff;
  }

  .campaign-image-container {
    width: 100%;
    max-width: 450px; /* Limita el ancho de la imagen principal */
    text-align: center;
  }

  .hero-main-image {
    width: 100%;
    height: auto;
    border-radius: 10px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
  }

  .campaign-tagline {
    margin-top: 1.5rem;
    text-align: center;
  }

  .main-title {
    font-size: 3.5rem;
    line-height: 1;
    margin: 0;
    color: #1a1a1a;
  }
  .highlight {
    color: #76bc21;
    font-style: italic;
  }

  .separator {
    width: 60px;
    height: 4px;
    background: #004d25;
    margin: 1.5rem auto;
  }

  .date-line {
    margin-top: 0.5rem;
    font-size: 0.9rem;
    color: #4b5563;
  }

  /* Panel de Video Vertical */
  .vertical-video-wrapper {
    width: 100%;
    height: 80vh; /* Altura generosa para video vertical */
    max-height: 700px;
    max-width: 400px; /* Ancho de video vertical */
    position: relative;
    overflow: hidden;
    border-radius: 10px;
  }
  .vertical-video-wrapper iframe {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
  }
  /* ------------------------------- */

  /* --- GALER√çA COMPACTA --- */
  .gallery-grid-compact {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 15px;
    margin-top: 2rem;
  }

  .media-item img {
    width: 100%;
    height: 250px;
    object-fit: cover;
    border-radius: 8px;
    transition: transform 0.3s;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  }

  .media-item img:hover {
    transform: scale(1.02);
  }

  /* Clase para ocultar fotos extra */
  .hidden-photo {
    display: none;
  }

  .secondary-btn {
    background: transparent;
    border: 2px solid #004d25;
    color: #004d25;
    padding: 10px 30px;
    border-radius: 50px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s;
  }

  .secondary-btn:hover {
    background: #004d25;
    color: white;
  }

  /* --- RESPONSIVIDAD --- */
  @media (max-width: 900px) {
    .new-hero-split {
      flex-direction: column;
      height: auto;
      min-height: auto;
      padding-top: 4rem;
    }
    .hero-panel {
      padding: 1rem 0;
    }
    .hero-video-panel {
      padding-right: 0;
      order: 1; /* Poner el video arriba en m√≥vil */
    }
    .hero-image-panel {
      padding-left: 0;
      box-shadow: none;
      order: 2; /* Poner la imagen/texto debajo del video */
    }
    .main-title {
      font-size: 2.5rem;
    }
    .vertical-video-wrapper {
      height: 50vh;
      max-width: 90%;
      margin: 0 auto;
    }
  }

  /* --- REDES SOCIALES (Mantener clases anteriores) --- */
  .paper-section {
    padding: 4rem 2rem;
    background: #fff;
  }
  .proposals-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    margin-top: 2rem;
  }
  .proposal-card {
    padding: 1.5rem;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    border-left: 5px solid #76bc21;
    background: #fff;
    display: flex;
    gap: 1rem;
  }
  .check-icon {
    color: #76bc21;
    font-weight: bold;
  }

  .magic-btn {
    background: #004d25;
    color: white;
    padding: 1rem 3rem;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 3rem;
  }
  .news-section.hidden {
    display: none;
  }
  .news-section.visible {
    display: block;
    animation: fadeIn 1s forwards;
  }
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  /* Footer */
  .main-footer {
    background: #111;
    color: #888;
    padding: 3rem 0;
    margin-top: 5rem;
    text-align: center;
  }
  .footer-content {
    display: flex;
    justify-content: space-between;
    max-width: 1000px;
    margin: 0 auto;
    flex-wrap: wrap;
    gap: 1rem;
  }
  .credits a {
    color: #76bc21;
    text-decoration: none;
  }
</style>

<script>
  // 2. CONTROL DE GALER√çA (Ver M√°s)
  const loadMoreBtn = document.getElementById("loadMoreGallery");
  const galleryGrid = document.getElementById("galleryGrid");

  if (loadMoreBtn && galleryGrid) {
    loadMoreBtn.addEventListener("click", () => {
      const hiddenPhotos = galleryGrid.querySelectorAll(".hidden-photo");
      hiddenPhotos.forEach((photo) => {
        photo.classList.remove("hidden-photo");
        // Peque√±a animaci√≥n de entrada
        photo.style.opacity = "0";
        photo.style.transform = "translateY(20px)";
        setTimeout(() => {
          photo.style.transition = "all 0.5s ease";
          photo.style.opacity = "1";
          photo.style.transform = "translateY(0)";
        }, 50);
      });
      loadMoreBtn.style.display = "none"; // Ocultar bot√≥n al terminar
    });
  }

  // 3. MAGIA (Propuestas -> Noticias)
  const magicBtn = document.getElementById("magicBtn");
  const frontPage = document.getElementById("frontPage");
  const newsWall = document.getElementById("newsWall");

  if (magicBtn && frontPage && newsWall) {
    magicBtn.addEventListener("click", () => {
      frontPage.style.opacity = "0";
      frontPage.style.transform = "translateY(-20px)";
      frontPage.style.transition = "all 0.5s";
      setTimeout(() => {
        frontPage.style.display = "none";
        newsWall.classList.remove("hidden");
        newsWall.classList.add("visible");
        newsWall.scrollIntoView({ behavior: "smooth" });
      }, 500);
    });
  }
</script>
