---
import Layout from "../layouts/Layout.astro";
import FloatingNav from "../components/FloatingNav.astro";

const propuestas = [
  "1. Recuperar la Prima de Antig√ºedad.",
  "2. Escalaf√≥n con Justicia, Equidad y Transparencia.",
  "3. Creaci√≥n de Nuevas Plazas.",
  "4. Recuperaci√≥n de la Plaza por Otorgamiento a los Hijos.",
  "5. Pugnar por el cumplimiento de las Condiciones Generales.",
  "6. Trato digno en el Servicio M√©dico.",
  "7. Impulsar Programas de Vivienda.",
  "8. Creaci√≥n de un Bufete Jur√≠dico.",
  "9. Atenci√≥n cercana al Trabajador Activo, Jubilado y Pensionado.",
  "10. Retomar Convenio de los Servicios Funerarios.",
  "11. Dignificaci√≥n del Trabajador Sindicalizado.",
];

// Generamos array de fotos
const galeriaFotos = Array.from(
  { length: 15 },
  (_, i) => `/images/gallery/evento-${i + 1}.jpg`
);
---

<Layout title="Brenda Vel√°zquez - Planilla Verde">
  <FloatingNav />

  <header class="hero-split">
    <div class="hero-left reveal active">
      <div class="logo-container">
        <img
          src="/images/logo.png"
          alt="Brenda Vel√°zquez Logo"
          class="main-logo"
        />
        <h1 class="main-title">
          EL CAMBIO<br /><span class="highlight">VERDADERO</span>
        </h1>
        <div class="separator"></div>
        <p class="date-line">PUEBLA, PUE. ‚Äî DICIEMBRE 2025</p>
      </div>
    </div>

    <div class="hero-right reveal active">
      <div class="video-container-clean">
        <video
          id="heroVideo"
          autoplay
          muted
          loop
          playsinline
          class="hero-video"
          poster="/images/hero/hero-1.jpg"
        >
          <source src="/videos/candidata.mp4" type="video/mp4" />
        </video>

        <button id="unmuteBtn" class="sound-toggle-btn">
          üîä Activar Sonido
        </button>
      </div>
    </div>
  </header>

  <main>
    <section id="frontPage" class="paper-section reveal">
      <div class="container">
        <h2 class="headline text-center">Nuestras 11 Propuestas Maestras</h2>
        <div class="proposals-grid">
          {
            propuestas.map((p) => (
              <div class="proposal-card">
                <div class="check-icon">‚úì</div>
                <p>{p}</p>
              </div>
            ))
          }
        </div>

        <div class="magic-trigger-container">
          <button id="magicBtn" class="magic-btn">
            ‚ñº VER NOTICIAS DEL D√çA
          </button>
        </div>
      </div>
    </section>

    <section id="newsWall" class="news-section hidden">
      <div class="container">
        <h2 class="headline text-center reveal">Actualidad de Campa√±a</h2>

        <div class="daily-feed">
          <article class="daily-post reveal">
            <div class="post-image">
              <img
                src="/images/noticias_generadas/Post_DERECHO.png"
                alt="Justicia Laboral"
              />
            </div>
          </article>

          <article class="daily-post reveal">
            <div class="post-image">
              <img
                src="/images/noticias_generadas/Post_TRANSPARENCIA.png"
                alt="Escalaf√≥n Justo"
              />
            </div>
          </article>

          <article class="daily-post reveal">
            <div class="post-image">
              <img
                src="/images/noticias_generadas/Post_CRECIMIENTO.png"
                alt="Crecimiento"
              />
            </div>
          </article>
        </div>
      </div>
    </section>

    <section class="gallery-full reveal">
      <div class="container">
        <h2 class="headline text-center">Galer√≠a del Movimiento</h2>

        <div class="gallery-grid-compact" id="galleryGrid">
          {
            galeriaFotos.map((foto, index) => (
              <div class={`media-item ${index >= 6 ? "hidden-photo" : ""}`}>
                <img src={foto} loading="lazy" alt="Evento" />
              </div>
            ))
          }
        </div>

        <div class="text-center" style="margin-top: 2rem;">
          <button id="loadMoreGallery" class="secondary-btn">
            + Ver todas las fotos
          </button>
        </div>
      </div>
    </section>

    <section class="cv-section reveal">
      <div class="container text-center">
        <h2>Transparencia Total</h2>
        <p>Conoce mi trayectoria profesional y sindical.</p>
        <a
          href="/docs/CV_Brenda_Velazquez.pdf"
          target="_blank"
          class="download-btn"
        >
          Descargar CV Oficial (PDF)
        </a>
      </div>
    </section>
  </main>

  <footer class="main-footer">
    <div class="container footer-content">
      <div class="copyright">
        <p>&copy; 2025 Brenda Vel√°zquez Batana. Planilla Verde.</p>
      </div>
      <div class="credits">
        <p>
          Desarrollado con <span class="heart">‚ù§</span> por <a
            href="#"
            target="_blank">Abraham Ojeda Web Dev</a
          >
        </p>
      </div>
    </div>
  </footer>
</Layout>

<style>
  /* --- HERO LIMPIO --- */
  .hero-split {
    display: flex;
    min-height: 85vh; /* Un poco m√°s corto para ver contenido */
    background: linear-gradient(to right, #ffffff 40%, #f0f4f0 100%);
    position: relative;
    overflow: hidden;
  }

  .hero-left {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 3rem;
    z-index: 2;
  }

  .logo-container {
    text-align: center;
  }
  .main-logo {
    max-width: 180px;
    margin-bottom: 1rem;
  }
  .main-title {
    font-size: 3.5rem;
    line-height: 1;
    margin: 0;
    color: #1a1a1a;
  }
  .highlight {
    color: #76bc21;
    font-style: italic;
  }
  .separator {
    width: 60px;
    height: 4px;
    background: #004d25;
    margin: 1.5rem auto;
  }

  /* VIDEO LIMPIO (Clean Glass) */
  .hero-right {
    flex: 1.5;
    position: relative;
    display: flex; /* Centrar video verticalmente */
    align-items: center;
    justify-content: center;
    background: #000;
  }

  .video-container-clean {
    width: 100%;
    height: 100%;
    position: relative;
  }

  .hero-video {
    width: 100%;
    height: 100%;
    object-fit: cover; /* Cubre todo el espacio elegantemente */
    opacity: 0.8; /* Sutil oscurecimiento */
    transition: opacity 0.5s;
  }

  /* Bot√≥n de Sonido Flotante */
  .sound-toggle-btn {
    position: absolute;
    bottom: 30px;
    right: 30px;
    background: rgba(0, 0, 0, 0.6);
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.3);
    padding: 10px 20px;
    border-radius: 30px;
    cursor: pointer;
    font-family: "Montserrat", sans-serif;
    font-weight: 600;
    backdrop-filter: blur(5px);
    transition: all 0.3s;
    z-index: 10;
  }

  .sound-toggle-btn:hover {
    background: #76bc21;
    border-color: #76bc21;
    transform: scale(1.05);
  }

  /* --- GALER√çA COMPACTA --- */
  .gallery-grid-compact {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 15px;
    margin-top: 2rem;
  }

  .media-item img {
    width: 100%;
    height: 250px;
    object-fit: cover;
    border-radius: 8px;
    transition: transform 0.3s;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  }

  .media-item img:hover {
    transform: scale(1.02);
  }

  /* Clase para ocultar fotos extra */
  .hidden-photo {
    display: none;
  }

  .secondary-btn {
    background: transparent;
    border: 2px solid #004d25;
    color: #004d25;
    padding: 10px 30px;
    border-radius: 50px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s;
  }

  .secondary-btn:hover {
    background: #004d25;
    color: white;
  }

  /* --- RESPONSIVIDAD --- */
  @media (max-width: 900px) {
    .hero-split {
      flex-direction: column-reverse;
      height: auto;
    }
    .hero-right {
      height: 50vh;
    } /* Altura fija en m√≥vil */
    .hero-left {
      padding: 2rem 1rem;
    }
    .main-title {
      font-size: 2.5rem;
    }
  }

  /* --- REDES SOCIALES (Mantener clases anteriores) --- */
  /* Copia aqu√≠ el resto de estilos de propuestas y footer que ya ten√≠as */
  .paper-section {
    padding: 4rem 2rem;
    background: #fff;
  }
  .proposals-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    margin-top: 2rem;
  }
  .proposal-card {
    padding: 1.5rem;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    border-left: 5px solid #76bc21;
    background: #fff;
    display: flex;
    gap: 1rem;
  }
  .check-icon {
    color: #76bc21;
    font-weight: bold;
  }

  .daily-feed {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
  }
  .daily-post img {
    width: 100%;
    border-radius: 8px;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
    transition: transform 0.3s;
  }
  .daily-post:hover img {
    transform: translateY(-5px);
  }

  .magic-btn {
    background: #004d25;
    color: white;
    padding: 1rem 3rem;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 3rem;
  }
  .news-section.hidden {
    display: none;
  }
  .news-section.visible {
    display: block;
    animation: fadeIn 1s forwards;
  }
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  /* Footer */
  .main-footer {
    background: #111;
    color: #888;
    padding: 3rem 0;
    margin-top: 5rem;
    text-align: center;
  }
  .footer-content {
    display: flex;
    justify-content: space-between;
    max-width: 1000px;
    margin: 0 auto;
    flex-wrap: wrap;
    gap: 1rem;
  }
  .credits a {
    color: #76bc21;
    text-decoration: none;
  }
</style>

<script>
  // 1. CONTROL DE VIDEO (Sonido)
  const vid = document.getElementById("heroVideo");
  const muteBtn = document.getElementById("unmuteBtn");

  if (vid && muteBtn) {
    muteBtn.addEventListener("click", () => {
      if (vid.muted) {
        vid.muted = false; // Activar sonido
        muteBtn.textContent = "üîá Silenciar";
        muteBtn.style.background = "#004d25";
      } else {
        vid.muted = true; // Silenciar
        muteBtn.textContent = "üîä Activar Sonido";
        muteBtn.style.background = "rgba(0, 0, 0, 0.6)";
      }
    });
  }

  // 2. CONTROL DE GALER√çA (Ver M√°s)
  const loadMoreBtn = document.getElementById("loadMoreGallery");
  const galleryGrid = document.getElementById("galleryGrid");

  if (loadMoreBtn && galleryGrid) {
    loadMoreBtn.addEventListener("click", () => {
      const hiddenPhotos = galleryGrid.querySelectorAll(".hidden-photo");
      hiddenPhotos.forEach((photo) => {
        photo.classList.remove("hidden-photo");
        // Peque√±a animaci√≥n de entrada
        photo.style.opacity = "0";
        photo.style.transform = "translateY(20px)";
        setTimeout(() => {
          photo.style.transition = "all 0.5s ease";
          photo.style.opacity = "1";
          photo.style.transform = "translateY(0)";
        }, 50);
      });
      loadMoreBtn.style.display = "none"; // Ocultar bot√≥n al terminar
    });
  }

  // 3. MAGIA (Propuestas -> Noticias)
  const magicBtn = document.getElementById("magicBtn");
  const frontPage = document.getElementById("frontPage");
  const newsWall = document.getElementById("newsWall");

  if (magicBtn && frontPage && newsWall) {
    magicBtn.addEventListener("click", () => {
      frontPage.style.opacity = "0";
      frontPage.style.transform = "translateY(-20px)";
      frontPage.style.transition = "all 0.5s";
      setTimeout(() => {
        frontPage.style.display = "none";
        newsWall.classList.remove("hidden");
        newsWall.classList.add("visible");
        newsWall.scrollIntoView({ behavior: "smooth" });
      }, 500);
    });
  }
</script>
